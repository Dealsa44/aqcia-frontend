<!-- Mobile-First Top Navigation -->
<nav class="navbar">
  <div class="navbar-content">

    <!-- Back Button (Left Side) -->
    <button 
      class="back-btn" 
      (click)="goBack()"
      *ngIf="shouldShowBackButton()"
      [title]="'Go Back'"
    >
      <i class="fa fa-arrow-left"></i>
    </button>

    <!-- Spacer when no back button -->
    <div *ngIf="!shouldShowBackButton()"></div>

    <!-- Right Side Actions -->
    <div class="nav-actions">
      <!-- Cart Button with Beautiful Animation (Desktop Only) -->
      <button 
        class="nav-action-btn cart-btn desktop-cart" 
        (click)="navigateToCart()"
        [title]="getCurrentText(navData.cart.title)"
        *ngIf="!mobileView"
      >
        <div class="cart-icon-container">
          <i class="fa fa-{{ navData.cart.icon }}"></i>
          <div class="cart-pulse"></div>
        </div>
        <span class="cart-badge" *ngIf="cartItemCount > 0">
          <span class="badge-number">{{ cartItemCount }}</span>
          <div class="badge-ripple"></div>
        </span>
      </button>

      <!-- City Selector -->
      <div class="dropdown" (click)="$event.stopPropagation()">
        <button class="nav-action-btn dropdown-toggle" (click)="toggleCity()" [title]="getCurrentText(currentCity.name)">
          <div class="dropdown-icon-container">
            <i class="fa fa-map-marker"></i>
            <div class="dropdown-icon-bg"></div>
          </div>
          <span class="dropdown-text">{{ getCurrentText(currentCity.name) }}</span>
        </button>
        @if (isCityOpen) {
        <div class="dropdown-menu">
          @for (city of navData.cities; track $index) {
          <button (click)="selectCity(city)" class="dropdown-item">
            <i class="fa fa-map-marker"></i>
            <span>{{ getCurrentText(city.name) }}</span>
            <div class="dropdown-item-bg"></div>
          </button>
          }
        </div>
        }
      </div>

      <!-- Language Selector -->
      <div class="dropdown" (click)="$event.stopPropagation()">
        <button class="nav-action-btn dropdown-toggle" (click)="toggleLanguage()">
          <div class="dropdown-icon-container">
            <i class="fa fa-globe"></i>
            <div class="dropdown-icon-bg"></div>
          </div>
          <span class="dropdown-text">
            {{ navData.languages[languageService.getCurrentLanguage()].code.toUpperCase() }}
          </span>
        </button>
        @if (isLanguageOpen) {
        <div class="dropdown-menu">
          @for (lang of navData.languages; track $index; let i = $index) {
          <button (click)="setLanguage(i)" class="dropdown-item">
            <i class="fa fa-globe"></i>
            <span>{{ getCurrentText(lang.name) }} ({{ lang.code.toUpperCase() }})</span>
            <div class="dropdown-item-bg"></div>
          </button>
          }
        </div>
        }
      </div>
    </div>
  </div>
</nav>

<!-- Bottom Navigation - Always visible for mobile app -->
<div class="bottom-nav">
  <div class="bottom-nav-content">
  <a
    (click)="navigateToPage('catalog')"
    class="bottom-nav-item"
    [class.active]="router.url.includes('catalog')"
    [title]="'Catalog'"
  >
    <div class="bottom-nav-icon">
      <i class="fa fa-th-large"></i>
      <div class="bottom-nav-ripple"></div>
    </div>
    <span>Catalog</span>
  </a>
  
  <a
    (click)="navigateToPage('markets')"
    class="bottom-nav-item"
    [class.active]="isMarketsActive()"
    [title]="'Markets'"
  >
    <div class="bottom-nav-icon">
      <i class="fa fa-store"></i>
      <div class="bottom-nav-ripple"></div>
    </div>
    <span>Markets</span>
  </a>
  
  
  <a
    (click)="navigateToPage('cart')"
    class="bottom-nav-item cart-btn"
    [class.active]="router.url.includes('cart')"
    [title]="getCurrentText(navData.cart.title)"
  >
    <div class="bottom-nav-icon">
      <i class="fa fa-{{ navData.cart.icon }}"></i>
      <div class="bottom-nav-ripple"></div>
      <!-- Item dropping animation -->
      <div class="item-drop-animation" *ngIf="showItemDrop">
        <i class="fa fa-shopping-cart"></i>
      </div>
    </div>
    <span>Cart</span>
    <span class="cart-badge" *ngIf="cartItemCount > 0">
      <span class="badge-number">{{ cartItemCount }}</span>
      <div class="badge-ripple"></div>
    </span>
  </a>
  
  <a
    (click)="navigateToPage('profile')"
    class="bottom-nav-item"
    [class.active]="isProfileActive()"
    [title]="'Profile'"
  >
    <div class="bottom-nav-icon">
      <i class="fa fa-user"></i>
      <div class="bottom-nav-ripple"></div>
    </div>
    <span>Profile</span>
  </a>
  </div>
</div>

<!-- Floating Action Button for Cart (when not in bottom nav) -->
<div class="fab-cart" *ngIf="!mobileView && cartItemCount > 0" (click)="navigateToCart()">
  <div class="fab-icon">
    <i class="fa fa-{{ navData.cart.icon }}"></i>
    <div class="fab-pulse"></div>
    <!-- Item dropping animation -->
    <div class="item-drop-animation" *ngIf="showItemDrop">
      <i class="fa fa-shopping-cart"></i>
    </div>
  </div>
  <span class="fab-badge">
    <span class="badge-number">{{ cartItemCount }}</span>
    <div class="badge-ripple"></div>
  </span>
</div>