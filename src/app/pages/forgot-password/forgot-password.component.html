<!-- pages/forgot-password/forgot-password.component.html -->
<div class="forgot-password-page">
  <div class="page-container">
    <div class="forgot-password-card">
      <h1>{{ getCurrentText(forgotPasswordMocks.title) }}</h1>

      @if (step === 'identify') {
        <div class="identify-step">
          <p class="subtitle">{{ getCurrentText(forgotPasswordMocks.identifyTitle) }}</p>

          <form (ngSubmit)="onIdentifySubmit()" #identifyForm="ngForm">
            <div class="form-group">
              <label>{{ getCurrentText(forgotPasswordMocks.emailLabel) }}</label>
              <input 
                type="email" 
                [(ngModel)]="resetData.email" 
                name="email" 
                required
                [placeholder]="getCurrentText(forgotPasswordMocks.emailPlaceholder)">
            </div>

            <div class="form-group">
              <label>{{ getCurrentText(forgotPasswordMocks.usernameLabel) }}</label>
              <input 
                type="text" 
                [(ngModel)]="resetData.username" 
                name="username" 
                required
                [placeholder]="getCurrentText(forgotPasswordMocks.usernamePlaceholder)">
            </div>

            @if (errorMessage) {
              <div class="error-message">
                {{ errorMessage }}
              </div>
            }

            <button type="submit" [disabled]="!identifyForm.valid || isLoading">
              {{ getCurrentText(forgotPasswordMocks.identifyButton) }}
              @if (isLoading) {
                <span class="spinner"></span>
              }
            </button>
          </form>
        </div>
      }

      @if (step === 'reset') {
        <div class="reset-step">
          <p class="subtitle">{{ getCurrentText(forgotPasswordMocks.resetTitle) }}</p>

          <form (ngSubmit)="onResetSubmit()" #resetForm="ngForm">
            <div class="form-group">
              <label>{{ getCurrentText(forgotPasswordMocks.newPasswordLabel) }}</label>
              <input 
                type="password" 
                [(ngModel)]="resetData.newPassword" 
                name="newPassword" 
                required
                minlength="6"
                [placeholder]="getCurrentText(forgotPasswordMocks.newPasswordPlaceholder)">
            </div>

            <div class="form-group">
              <label>{{ getCurrentText(forgotPasswordMocks.confirmNewPasswordLabel) }}</label>
              <input 
                type="password" 
                [(ngModel)]="resetData.confirmNewPassword" 
                name="confirmNewPassword" 
                required
                [placeholder]="getCurrentText(forgotPasswordMocks.confirmNewPasswordPlaceholder)">
            </div>

            @if (errorMessage) {
              <div class="error-message">
                {{ errorMessage }}
              </div>
            }

            @if (successMessage) {
              <div class="success-message">
                {{ successMessage }}
              </div>
            }

            <button type="submit" [disabled]="!resetForm.valid || isLoading">
              {{ getCurrentText(forgotPasswordMocks.resetButton) }}
              @if (isLoading) {
                <span class="spinner"></span>
              }
            </button>
          </form>
        </div>
      }

      <div class="back-to-login">
        <a [routerLink]="['/', languageService.getCurrentLanguageCode(), 'login']">
          {{ getCurrentText(forgotPasswordMocks.backToLogin) }}
        </a>
      </div>
    </div>
  </div>
</div>